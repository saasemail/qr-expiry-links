<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ExpireQR — Feedback</title>
  <link rel="stylesheet" href="styles.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

  <!-- Page-only polish (no other files touched) -->
  <style>
    .page-hero { text-align: center; max-width: 860px; margin: 0 auto 1.25rem; }
    .page-title { color: var(--accent2, #6D28D9); font-size: clamp(2rem, 3.2vw, 2.6rem); letter-spacing: -0.02em; }
    .page-subtitle { max-width: 620px; margin-left: auto; margin-right: auto; }

    .page-card { max-width: 760px; margin-left: auto; margin-right: auto; }
    .prose form { max-width: 640px !important; width: 100% !important; margin: 0 auto; }

    /* Force full-width controls (styles.css is likely shrinking them) */
    .prose form label {
      display: block !important;
      width: 100% !important;
      max-width: 100% !important;
    }
    .prose form textarea,
    .prose form input {
      display: block !important;
      width: 100% !important;
      max-width: 100% !important;
      box-sizing: border-box !important;
    }

    /* Textarea sizing like the example screenshot */
    #msg {
      resize: none !important;
      min-height: 260px !important;
      height: 260px !important;
      line-height: 1.45 !important;
    }

    /* Submit button full width like screenshot */
    .feedback-actions { display: block; }
    #submitBtn { width: 100% !important; justify-content: center; }

    /* Hidden fallback row (shows only after submit) */
    #fallbackRow {
      display: none;
      margin-top: 0.85rem;
      gap: 0.65rem;
      align-items: center;
      justify-content: space-between;
      flex-wrap: wrap;
    }
    #fallbackRow .muted { margin: 0; }
    #copyBtn { white-space: nowrap; }

    @media (max-width: 520px) {
      .page-card { max-width: 92vw; }
      .prose form { max-width: 100% !important; }
      #msg { min-height: 240px !important; height: 240px !important; }
      #fallbackRow { width: 100%; }
    }
  </style>
</head>

<body>
  <nav class="navbar">
    <div class="nav-left">
      <span class="brand-icon" aria-hidden="true">
        <svg viewBox="0 0 24 24" width="22" height="22" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M3 3h8v8H3V3Zm2 2v4h4V5H5Zm8-2h8v8h-8V3Zm2 2v4h4V5h-4ZM3 13h8v8H3v-8Zm2 2v4h4v-4H5Zm10 0h2v2h-2v-2Zm2 2h2v2h-2v-2Zm-2 2h2v2h-2v-2Zm4-6h2v6h-2v-6Z" fill="currentColor"/>
        </svg>
      </span>
      <h1 class="brand-name">ExpireQR</h1>
    </div>

    <div class="nav-links">
      <a href="index.html" rel="nofollow">Home</a>
      <a href="faq.html" rel="nofollow">FAQ</a>
    </div>
  </nav>

  <main class="page">
    <header class="page-hero">
      <h2 class="page-title">We'd love your feedback</h2>
      <p class="page-subtitle">
        Your thoughts help us improve ExpireQR. Suggestions, bugs, or ideas — all are welcome!
      </p>
    </header>

    <section class="page-card">
      <div class="prose">
        <form id="feedbackForm" novalidate>
          <label for="msg">
            Your Message <span aria-hidden="true">*</span>
            <textarea
              id="msg"
              name="msg"
              required
              placeholder="Share your thoughts here..."
            ></textarea>
          </label>

          <label for="email" style="margin-top: 0.95rem;">
            Email (optional)
            <input
              id="email"
              name="email"
              type="email"
              inputmode="email"
              autocomplete="email"
              placeholder="you@example.com"
            />
          </label>

          <p class="muted" style="margin: 0.45rem 0 0;">
            We'll only use this to follow up on your feedback if needed.
          </p>

          <div class="feedback-actions" style="margin-top: 1.15rem;">
            <button class="btn btn-primary" id="submitBtn" type="submit">Submit Feedback</button>
          </div>

          <!-- Fallback (hidden until submit), keeps UI clean but still usable if mailto doesn't open -->
          <div id="fallbackRow">
            <p class="muted">
              If your email app didn’t open, copy the message and email <strong id="supportEmailInline">support@tempqr.com</strong>.
            </p>
            <button class="btn btn-ghost" id="copyBtn" type="button">Copy message</button>
          </div>

          <p class="muted" id="status" style="margin-top: 0.9rem; display:none;"></p>

          <!-- Hidden support address (easy to change later) -->
          <input type="hidden" id="supportTo" value="support@tempqr.com" />
        </form>
      </div>
    </section>
  </main>

  <footer class="footer">
    <div class="footer-left">© ExpireQR</div>
    <div class="footer-links">
      <a href="terms.html" rel="nofollow">Terms</a>
      <a href="privacy.html" rel="nofollow">Privacy</a>
      <a href="faq.html" rel="nofollow">FAQ</a>
      <a href="feedback.html" rel="nofollow">Feedback</a>
    </div>
  </footer>

  <script>
    (function () {
      const form = document.getElementById("feedbackForm");
      const msg = document.getElementById("msg");
      const email = document.getElementById("email");
      const status = document.getElementById("status");
      const copyBtn = document.getElementById("copyBtn");
      const supportTo = document.getElementById("supportTo");
      const fallbackRow = document.getElementById("fallbackRow");
      const supportEmailInline = document.getElementById("supportEmailInline");

      function showStatus(text) {
        if (!status) return;
        status.textContent = text;
        status.style.display = "block";
        window.clearTimeout(showStatus._t);
        showStatus._t = window.setTimeout(() => { status.style.display = "none"; }, 2600);
      }

      function buildPayload() {
        const message = (msg.value || "").trim();
        const fromEmail = (email.value || "").trim();

        const lines = [];
        lines.push("ExpireQR Feedback");
        lines.push("");
        if (fromEmail) lines.push("Reply email: " + fromEmail);
        lines.push("Message:");
        lines.push(message);
        lines.push("");
        lines.push("----");
        lines.push("Meta:");
        try { lines.push("User agent: " + navigator.userAgent); } catch (e) {}
        try { lines.push("Time: " + new Date().toISOString()); } catch (e) {}

        return { message, fromEmail, body: lines.join("\n") };
      }

      async function copyText(text) {
        try {
          if (navigator.clipboard && navigator.clipboard.writeText) {
            await navigator.clipboard.writeText(text);
            return true;
          }
        } catch (e) {}

        try {
          const ta = document.createElement("textarea");
          ta.value = text;
          ta.setAttribute("readonly", "");
          ta.style.position = "absolute";
          ta.style.left = "-9999px";
          document.body.appendChild(ta);
          ta.select();
          document.execCommand("copy");
          document.body.removeChild(ta);
          return true;
        } catch (e) {
          return false;
        }
      }

      if (copyBtn) {
        copyBtn.addEventListener("click", async function () {
          const { message, body } = buildPayload();
          if (!message) {
            showStatus("Please write a message first.");
            msg.focus();
            return;
          }
          const ok = await copyText(body);
          showStatus(ok ? "Copied. Paste it into an email and send." : "Copy failed. Please select and copy manually.");
        });
      }

      form.addEventListener("submit", function (e) {
        e.preventDefault();

        const to = (supportTo.value || "support@tempqr.com").trim();
        if (supportEmailInline) supportEmailInline.textContent = to;

        const { message, body } = buildPayload();

        if (!message) {
          showStatus("Please write a message.");
          msg.focus();
          return;
        }

        const subject = "ExpireQR Feedback";
        const mailto =
          "mailto:" + encodeURIComponent(to) +
          "?subject=" + encodeURIComponent(subject) +
          "&body=" + encodeURIComponent(body);

        try { window.location.href = mailto; } catch (err) {}

        if (fallbackRow) fallbackRow.style.display = "flex";
        showStatus("If nothing opened, use “Copy message” and paste into Gmail/Outlook.");
      });
    })();
  </script>
</body>
</html>
